# /seo:i18n - International SEO Setup

## Description

Configure international SEO with hreflang tags, locale-specific sitemaps, and multi-language metadata.

## Usage

```
/seo:i18n [options]
```

**Options:**
- `--setup` - Initial i18n SEO configuration
- `--add-locale <code>` - Add new locale (e.g., `vi-VN`)
- `--audit` - Audit existing i18n setup
- `--sitemap` - Generate locale-specific sitemaps

## Execution Steps

### Initial Setup (`--setup`)

1. **Configure i18n Routing**
   ```tsx
   // i18n/config.ts
   export const locales = ['en', 'vi', 'ja'] as const;
   export const defaultLocale = 'en' as const;
   export type Locale = (typeof locales)[number];

   export const localeNames: Record<Locale, string> = {
     en: 'English',
     vi: 'Tiếng Việt',
     ja: '日本語',
   };
   ```

2. **Generate Hreflang Tags**
   ```tsx
   // app/[locale]/layout.tsx
   export default function LocaleLayout({
     children,
     params,
   }: {
     children: React.ReactNode;
     params: { locale: string };
   }) {
     return (
       <html lang={params.locale}>
         <head>
           {locales.map((locale) => (
             <link
               key={locale}
               rel="alternate"
               hrefLang={locale}
               href={`https://example.com/${locale}`}
             />
           ))}
           <link
             rel="alternate"
             hrefLang="x-default"
             href="https://example.com"
           />
         </head>
         <body>{children}</body>
       </html>
     );
   }
   ```

3. **Locale-Specific Metadata**
   ```tsx
   // app/[locale]/page.tsx
   import { Metadata } from 'next';
   import { getTranslations } from 'next-intl/server';

   export async function generateMetadata({
     params: { locale },
   }): Promise<Metadata> {
     const t = await getTranslations({ locale, namespace: 'Metadata' });

     return {
       title: t('title'),
       description: t('description'),
       alternates: {
         canonical: `https://example.com/${locale}`,
         languages: Object.fromEntries(
           locales.map((l) => [l, `https://example.com/${l}`])
         ),
       },
     };
   }
   ```

4. **Multi-Locale Sitemap**
   ```tsx
   // app/sitemap.ts
   import { MetadataRoute } from 'next';
   import { locales, defaultLocale } from '@/i18n/config';

   export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
     const baseUrl = 'https://example.com';

     const pages = await getAllPages();

     return pages.flatMap((page) =>
       locales.map((locale) => ({
         url: locale === defaultLocale
           ? `${baseUrl}${page.path}`
           : `${baseUrl}/${locale}${page.path}`,
         lastModified: new Date(page.updatedAt),
         alternates: {
           languages: Object.fromEntries(
             locales.map((l) => [
               l,
               l === defaultLocale
                 ? `${baseUrl}${page.path}`
                 : `${baseUrl}/${l}${page.path}`,
             ])
           ),
         },
       }))
     );
   }
   ```

## Hreflang Best Practices

| Scenario | Implementation |
|----------|---------------|
| Same language, different regions | `en-US`, `en-GB`, `en-AU` |
| Different languages | `en`, `vi`, `ja` |
| Default/fallback | `x-default` |
| Regional targeting | `en-US` (not just `us`) |

## URL Structure Options

| Strategy | Example | Pros | Cons |
|----------|---------|------|------|
| Subdirectory | example.com/vi/ | Easy setup, shared domain authority | No geo-targeting |
| Subdomain | vi.example.com | Geo-targeting possible | Separate SEO effort |
| ccTLD | example.vn | Strong geo signal | Expensive, complex |

**Recommended:** Subdirectory structure for most cases.

## Examples

```bash
# Initial setup
/seo:i18n --setup

# Add Vietnamese locale
/seo:i18n --add-locale vi-VN

# Audit existing setup
/seo:i18n --audit

# Generate multi-locale sitemap
/seo:i18n --sitemap
```

## Output

- `i18n/config.ts` - Locale configuration
- Updated layouts with hreflang tags
- Multi-locale sitemap configuration
- Audit report (if `--audit`)

## Checklist

- [ ] All pages have hreflang tags for each locale
- [ ] `x-default` tag present
- [ ] Sitemap includes all locale variants
- [ ] Language selector visible to users
- [ ] `<html lang="...">` correctly set
- [ ] Canonical URLs are locale-specific
- [ ] Return links are bidirectional (A→B and B→A)

## References

- Google i18n Guide: https://developers.google.com/search/docs/specialty/international
- Hreflang Generator: https://www.aleydasolis.com/english/international-seo-tools/hreflang-tags-generator/
- Next.js i18n: https://nextjs.org/docs/app/building-your-application/routing/internationalization

## Notes

- Hreflang must be bidirectional (each page points to all variants)
- Use ISO 639-1 language codes (en, vi, ja)
- Use ISO 3166-1 Alpha-2 country codes (US, VN, JP)
- Test with Google Search Console International Targeting
