---
description: "End-to-end testing patterns for Cypress, Playwright, Detox"
globs:
  - "**/e2e/**"
  - "**/cypress/**"
  - "**/*.e2e.ts"
alwaysApply: false
---

# E2E Testing Patterns

## Cypress (Web)

```typescript
describe('Login Flow', () => {
  beforeEach(() => {
    cy.visit('/login')
  })

  it('logs in successfully with valid credentials', () => {
    cy.get('[data-testid="email-input"]').type('user@example.com')
    cy.get('[data-testid="password-input"]').type('password123')
    cy.get('[data-testid="login-button"]').click()

    cy.url().should('include', '/dashboard')
    cy.get('[data-testid="welcome-message"]').should('contain', 'Welcome')
  })

  it('shows error for invalid credentials', () => {
    cy.get('[data-testid="email-input"]').type('wrong@example.com')
    cy.get('[data-testid="password-input"]').type('wrongpassword')
    cy.get('[data-testid="login-button"]').click()

    cy.get('[data-testid="error-message"]').should('be.visible')
  })
})
```

## Playwright (Web)

```typescript
import { test, expect } from '@playwright/test'

test('user can complete checkout', async ({ page }) => {
  await page.goto('/products')
  await page.click('[data-testid="add-to-cart"]')
  await page.click('[data-testid="checkout-button"]')

  await page.fill('[data-testid="card-number"]', '4242424242424242')
  await page.fill('[data-testid="expiry"]', '12/25')
  await page.click('[data-testid="pay-button"]')

  await expect(page.locator('[data-testid="success-message"]')).toBeVisible()
})
```

## Detox (React Native)

```typescript
describe('Login Screen', () => {
  beforeAll(async () => {
    await device.launchApp()
  })

  it('should login successfully', async () => {
    await element(by.id('email-input')).typeText('user@example.com')
    await element(by.id('password-input')).typeText('password123')
    await element(by.id('login-button')).tap()

    await expect(element(by.id('home-screen'))).toBeVisible()
  })
})
```

## Best Practices

### Do's ✅
- Use data-testid attributes
- Test critical user flows
- Mock external services
- Run in CI/CD pipeline
- Use page objects pattern

### Don'ts ❌
- Test implementation details
- Rely on CSS selectors
- Skip error scenarios
- Have interdependent tests

---

**Used by:** qa-automation agent
