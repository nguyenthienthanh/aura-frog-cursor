---
description: Workflow phase deliverables checklist - Required documents and validation for each of the 9 workflow phases
globs: []
alwaysApply: false
---

# Workflow Deliverables Rule

**Purpose:** Every workflow phase MUST produce its required deliverables before proceeding to the next phase.

## Phase Deliverables Checklist

### Phase 1: Understand (Requirements)

| Deliverable | Location | Required |
|-------------|----------|----------|
| REQUIREMENTS.md | .cursor/logs/workflows/{id}/ | YES |
| User stories | In REQUIREMENTS.md | YES |
| Acceptance criteria | In REQUIREMENTS.md | YES |
| Out of scope | In REQUIREMENTS.md | YES |

**Validation:**
- [ ] REQUIREMENTS.md created
- [ ] User stories documented (at least 1)
- [ ] Acceptance criteria listed (at least 3)
- [ ] Scope clearly defined

---

### Phase 2: Design (Technical Specification)

| Deliverable | Location | Required | Purpose |
|-------------|----------|----------|---------|
| TECH_SPEC.md | .cursor/logs/workflows/{id}/ | YES | AI reads this - concise, structured |
| TECH_SPEC_CONFLUENCE.md | .cursor/logs/workflows/{id}/ | YES | Full Confluence format for humans |
| Architecture diagram | In both files | YES | System design |
| File structure | In both files | YES | Code organization |
| API contracts | In both files | If API | Endpoint definitions |
| Database schema | In both files | If DB changes | Data model |
| Component hierarchy | In both files | If frontend | UI structure |

**CRITICAL: AI must ALWAYS read TECH_SPEC.md, NOT Confluence version.**

**Validation:**
- [ ] TECH_SPEC.md created (AI-readable format)
- [ ] TECH_SPEC_CONFLUENCE.md created (human-readable)
- [ ] Architecture diagram included in both
- [ ] File structure planned
- [ ] Dependencies identified
- [ ] Risk assessment documented

---

### Phase 3: UI Breakdown (Design Analysis)

| Deliverable | Location | Required |
|-------------|----------|----------|
| UI_BREAKDOWN.md | .cursor/logs/workflows/{id}/ | YES |
| Component list | In UI_BREAKDOWN.md | YES |
| Props definitions | In UI_BREAKDOWN.md | YES |
| Responsive breakpoints | In UI_BREAKDOWN.md | If responsive |
| Accessibility notes | In UI_BREAKDOWN.md | YES |

**Validation:**
- [ ] UI_BREAKDOWN.md created
- [ ] Components identified and listed
- [ ] Props/interfaces defined
- [ ] Accessibility requirements noted
- [ ] Design tokens/theme values extracted

---

### Phase 4: Test Plan

| Deliverable | Location | Required |
|-------------|----------|----------|
| TEST_PLAN.md | .cursor/logs/workflows/{id}/ | YES |
| Test scenarios | In TEST_PLAN.md | YES |
| Test data requirements | In TEST_PLAN.md | YES |
| Coverage targets | In TEST_PLAN.md | YES |
| E2E test cases | In TEST_PLAN.md | If E2E needed |

**Validation:**
- [ ] TEST_PLAN.md created
- [ ] Unit test scenarios listed
- [ ] Integration test scenarios listed
- [ ] E2E test scenarios listed (if applicable)
- [ ] Test data requirements defined
- [ ] Coverage target set (minimum 80%)

---

### Phase 5a: TDD RED (Write Tests)

| Deliverable | Location | Required |
|-------------|----------|----------|
| Test files | src/**/__tests__/ | YES |
| Test report (failing) | Console output | YES |

**Validation:**
- [ ] Test files created
- [ ] All tests FAIL (expected)
- [ ] Test file naming correct (*.test.ts, *.spec.ts)
- [ ] Assertions are meaningful

---

### Phase 5b: TDD GREEN (Implementation)

| Deliverable | Location | Required |
|-------------|----------|----------|
| Implementation code | src/ | YES |
| Test report (passing) | Console output | YES |

**Validation:**
- [ ] Code implemented
- [ ] All tests PASS
- [ ] No TypeScript errors
- [ ] No linting errors
- [ ] Coverage meets target

---

### Phase 5c: TDD REFACTOR (Polish)

| Deliverable | Location | Required |
|-------------|----------|----------|
| Refactored code | src/ | YES |
| Test report (still passing) | Console output | YES |

**Validation:**
- [ ] Code refactored
- [ ] All tests still PASS
- [ ] Code quality improved
- [ ] No new warnings

---

### Phase 6: Review (Code Review)

| Deliverable | Location | Required |
|-------------|----------|----------|
| CODE_REVIEW.md | .cursor/logs/workflows/{id}/ | YES |
| Security review | In CODE_REVIEW.md | YES |
| Performance review | In CODE_REVIEW.md | YES |
| Best practices check | In CODE_REVIEW.md | YES |

**Validation:**
- [ ] CODE_REVIEW.md created
- [ ] Security issues listed (or "None found")
- [ ] Performance issues listed (or "None found")
- [ ] Best practices violations listed (or "None found")
- [ ] Recommendations documented

---

### Phase 7: Verify (QA Validation)

| Deliverable | Location | Required |
|-------------|----------|----------|
| QA_REPORT.md | .cursor/logs/workflows/{id}/ | YES |
| Test results | In QA_REPORT.md | YES |
| Coverage report | In QA_REPORT.md | YES |
| Manual test results | In QA_REPORT.md | If manual tests |

**Validation:**
- [ ] QA_REPORT.md created
- [ ] All tests passing
- [ ] Coverage percentage documented
- [ ] No regressions found
- [ ] QA sign-off given

---

### Phase 8: Document (Documentation)

| Deliverable | Location | Required |
|-------------|----------|----------|
| IMPLEMENTATION_SUMMARY.md | .cursor/logs/workflows/{id}/ | YES |
| DEPLOYMENT_GUIDE.md | .cursor/logs/workflows/{id}/ | If deployment |
| CHANGELOG.md update | Project root | YES |

**Validation:**
- [ ] IMPLEMENTATION_SUMMARY.md created
- [ ] Changes documented
- [ ] CHANGELOG.md updated
- [ ] API documentation updated (if API changes)
- [ ] README updated (if needed)

---

### Phase 9: Share (Notification)

| Deliverable | Location | Required |
|-------------|----------|----------|
| JIRA update | JIRA ticket | If JIRA |
| Slack notification | Slack channel | If Slack configured |
| Workflow archive | .cursor/logs/workflows/{id}/ | YES |

**Validation:**
- [ ] JIRA ticket updated (if applicable)
- [ ] Team notified (if applicable)
- [ ] Workflow state archived
- [ ] All documents in workflow folder

---

## Workflow Folder Structure

Every workflow MUST create this folder structure:

```
.cursor/logs/workflows/{workflow-id}/
  REQUIREMENTS.md           # Phase 1
  TECH_SPEC.md              # Phase 2 - AI reads this (concise)
  TECH_SPEC_CONFLUENCE.md   # Phase 2 - Human-readable (full Confluence format)
  UI_BREAKDOWN.md           # Phase 3 (if UI)
  TEST_PLAN.md              # Phase 4
  CODE_REVIEW.md            # Phase 6
  QA_REPORT.md              # Phase 7
  IMPLEMENTATION_SUMMARY.md # Phase 8
  DEPLOYMENT_GUIDE.md       # Phase 8 (if deployment)
  CHANGELOG_ENTRY.md        # Phase 8
  workflow-state.json       # Workflow metadata
```

**IMPORTANT:** AI must read TECH_SPEC.md for implementation guidance, not TECH_SPEC_CONFLUENCE.md.

---

## Enforcement

### Before Phase Transition

**MUST verify current phase deliverables exist before approving:**

```markdown
## Pre-Approval Check

Current Phase: [X]
Required Deliverables:
- [x] Document 1 - Created
- [x] Document 2 - Created
- [ ] Document 3 - MISSING

Cannot proceed - missing deliverables
```

### At Workflow End

**MUST verify all documents exist before closing.**

---

## Missing Deliverable Recovery

### Option 1: Create Retroactively

If a deliverable is missing at a later phase, generate it based on current implementation state.

### Option 2: Note Omission

If a deliverable is intentionally skipped (e.g., UI_BREAKDOWN.md for backend-only features), document the reason and approval.

---

## Quick Reference Card

| Phase | Key Document | Must Have |
|-------|--------------|-----------|
| 1 | REQUIREMENTS.md | User stories, acceptance criteria |
| 2 | TECH_SPEC.md | AI-readable: Architecture, files, APIs |
| 2 | TECH_SPEC_CONFLUENCE.md | Human-readable: Full Confluence format |
| 3 | UI_BREAKDOWN.md | Components, props, accessibility |
| 4 | TEST_PLAN.md | Test scenarios, coverage target |
| 5a | Test files | Failing tests |
| 5b | Implementation | Passing tests |
| 5c | Refactored code | Still passing |
| 6 | CODE_REVIEW.md | Security, performance, practices |
| 7 | QA_REPORT.md | Test results, coverage |
| 8 | IMPLEMENTATION_SUMMARY.md | Changes, deployment |
| 9 | Workflow archive | All documents |

---

## Related Rules

| Rule | Connection |
|------|------------|
| safety.mdc | Approval gates and deliverables checked at gates |
| verification.mdc | Run commands to verify deliverables |

---

**Version:** 1.11.0
**Last Updated:** 2026-02-13
