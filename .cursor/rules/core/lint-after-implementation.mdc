---
description: "MANDATORY: Run linter after every implementation and resolve all issues before completion"
globs: []
alwaysApply: true
---

# Lint After Implementation

**Version:** 1.1.7
**Priority:** HIGH - Non-negotiable quality gate
**Type:** Rule (Mandatory)

---

## Core Principle

**After EVERY code implementation, run the project linter and resolve ALL issues before marking the task complete.**

---

## When to Run Lint

```toon
lint_triggers[6]{action,must_lint}:
 New file created,Yes - immediately after
 Function/component added,Yes - after implementation
 Bug fix completed,Yes - verify no new issues
 Refactoring done,Yes - ensure no regressions
 Test written,Yes - tests must pass lint too
 Any code change,Yes - before commit
```

---

## Lint Command Detection

### Auto-Detect from package.json

```toon
lint_commands[4]{check_for,command}:
 scripts.lint,npm run lint
 scripts.lint:fix,npm run lint:fix
 scripts.eslint,npm run eslint
 scripts.check,npm run check (for Biome)
```

### Common Lint Commands

```toon
lint_by_tool[5]{tool,check_command,fix_command}:
 ESLint,npx eslint . --ext .ts/.tsx/.js/.jsx,npx eslint . --fix
 TSLint (legacy),npx tslint -c tslint.json,npx tslint --fix
 Biome,npx biome check .,npx biome check --apply
 Prettier,npx prettier --check .,npx prettier --write .
 TypeScript,npx tsc --noEmit,N/A (type errors need manual fix)
```

---

## Implementation Workflow

### After Each Implementation

```
1. Complete the code change
2. Run lint check:
   npm run lint
   # or: npx eslint [changed-files]

3. If errors found:
   a. Try auto-fix: npm run lint:fix
   b. Manually fix remaining issues
   c. Re-run lint to verify

4. Only mark task complete when lint passes
```

### Quick Lint (Changed Files Only)

```bash
# Lint only staged files
npx eslint $(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx|js|jsx)$')

# Lint only modified files
npx eslint $(git diff --name-only | grep -E '\.(ts|tsx|js|jsx)$')
```

---

## Common Lint Issues & Fixes

```toon
auto_fixable[6]{issue,fix_command}:
 Missing semicolons,eslint --fix
 Trailing whitespace,eslint --fix / prettier --write
 Import order,eslint --fix (with import plugin)
 Unused imports,eslint --fix (with unused-imports plugin)
 Quotes style,eslint --fix
 Indentation,eslint --fix / prettier --write
```

```toon
manual_fix_required[6]{issue,solution}:
 any type,Replace with proper type or unknown
 Missing return type,Add explicit return type annotation
 Unused variable,Remove or use the variable
 Missing await,Add await to async call
 Non-null assertion,Use optional chaining + nullish coalescing
 Console.log,Remove or replace with logger
```

---

## TypeScript Errors

TypeScript errors are NOT auto-fixable. Always run:

```bash
# Check for type errors
npx tsc --noEmit

# Or if using project script
npm run typecheck
```

### Common TypeScript Issues

```toon
ts_issues[5]{error,fix}:
 Type 'X' is not assignable,Check type compatibility / add type guard
 Property does not exist,Add to interface or use optional chaining
 Cannot find module,Install types: npm i -D @types/[lib]
 Implicit any,Add explicit type annotation
 Possibly undefined,Add null check or use optional chaining
```

---

## Pre-Commit Integration

If project uses husky/lint-staged, lint runs automatically:

```json
// package.json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": ["eslint --fix", "prettier --write"],
    "*.{json,md}": ["prettier --write"]
  }
}
```

Even with pre-commit hooks, **run lint manually** to catch issues early.

---

## Quality Gate Checklist

Before marking implementation complete:

```toon
quality_gate[5]{check,command,must_pass}:
 ESLint,npm run lint,Yes - 0 errors
 TypeScript,npm run typecheck,Yes - 0 errors
 Prettier,npm run format:check,Yes - all formatted
 Tests,npm run test,Yes - all pass
 Build,npm run build,Yes - no build errors
```

---

## Workflow Integration

### Phase 5b (GREEN) - Implementation

```
After writing code to make tests pass:
1. Run tests → must pass
2. Run lint → must pass (THIS RULE)
3. Then proceed to Phase 5c (REFACTOR)
```

### Phase 5c (REFACTOR) - Polish

```
After refactoring:
1. Run tests → must still pass
2. Run lint → must pass (THIS RULE)
3. Then proceed to Phase 6 (Review)
```

---

## Error Response Format

When lint errors are found, report:

```markdown
## Lint Issues Found

**Files:** [list of files with issues]
**Errors:** [count]
**Warnings:** [count]

### Issues:
1. `file.ts:10:5` - error: Unexpected 'any' type (@typescript-eslint/no-explicit-any)
2. `file.ts:15:1` - warning: Missing return type (@typescript-eslint/explicit-function-return-type)

### Auto-fixed:
- Import order (3 files)
- Trailing whitespace (2 files)

### Manual fixes needed:
- Replace `any` with proper types
- Add return type annotations
```

---

## References

- Linting standards: `linting-standards.mdc`
- Code quality: `code-quality.mdc`
- Workflow: `workflow-orchestrator.mdc`

---

**Version:** 1.1.7
**Last Updated:** 2025-12-17
