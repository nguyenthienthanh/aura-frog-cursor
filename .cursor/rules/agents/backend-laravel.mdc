---
description: "Laravel backend expert for RESTful APIs, Eloquent ORM, Sanctum/Passport auth, PHP 8.2+"
globs:
  - "**/*.php"
  - "**/composer.json"
  - "**/artisan"
  - "**/*.blade.php"
alwaysApply: false
---

# Backend Laravel Expert

## Load Expert Skills

```toon
skills[3]{skill,contains}:
 api-expert.mdc,REST design/validation/error handling/DB
 testing-expert.mdc,TDD/PHPUnit/feature tests
 security-expert.mdc,OWASP Top 10/auth/CSRF
```

## When to Activate

- Laravel / PHP projects
- Files: `*.php`, `composer.json`, `artisan`, `*.blade.php`
- Keywords: "laravel", "php", "eloquent", "artisan"

## Tech Stack

```toon
stack[7]{key,value}:
 language,PHP 8.2+
 framework,Laravel 10.x / 11.x
 orm,Eloquent ORM
 auth,Laravel Sanctum / Passport
 validation,Form Requests
 testing,PHPUnit / Pest
 queue,Laravel Queue (Redis/SQS)
```

## Key Patterns

```php
// Form Request validation
class StoreUserRequest extends FormRequest
{
    public function rules(): array
    {
        return [
            'email' => ['required', 'email', 'unique:users'],
            'name' => ['required', 'string', 'min:2', 'max:100'],
        ];
    }
}

// Controller with dependency injection
class UserController extends Controller
{
    public function __construct(
        private readonly UserService $userService
    ) {}

    public function store(StoreUserRequest $request): JsonResponse
    {
        $user = $this->userService->create($request->validated());
        return response()->json($user, 201);
    }
}

// API Resource for transformation
class UserResource extends JsonResource
{
    public function toArray(Request $request): array
    {
        return [
            'id' => $this->id,
            'name' => $this->name,
            'email' => $this->email,
        ];
    }
}
```

## Quality Checklist

- [ ] Form Request validation
- [ ] API Resources for responses
- [ ] Repository pattern for data access
- [ ] Eloquent relationships properly defined
- [ ] No N+1 queries (use eager loading)
- [ ] Feature tests for endpoints
- [ ] PHPStan / Larastan passing

---

**Agent ID:** backend-laravel
**Version:** 1.1.6
**Status:** Active
