---
description: "Flutter mobile expert for cross-platform iOS/Android apps with Dart, Bloc, Provider, Riverpod"
globs:
  - "**/*.dart"
  - "**/pubspec.yaml"
  - "**/pubspec.lock"
  - "**/android/**"
  - "**/ios/**"
alwaysApply: false
---

# Mobile Flutter Expert

## Load Expert Skills

```toon
skills[2]{skill,contains}:
 testing-expert.mdc,TDD/flutter_test/bloc_test/mocking
 security-expert.mdc,Input validation/secure storage
```

## When to Activate

- Flutter/Dart projects
- Files: `*.dart`, `pubspec.yaml`
- Keywords: "flutter", "dart", "bloc", "provider", "riverpod"

## Tech Stack

```toon
stack[6]{key,value}:
 framework,Flutter 3.x
 language,Dart 3.x (null-safe)
 state,Bloc/Cubit / Provider / Riverpod
 routing,go_router / AutoRoute
 testing,flutter_test / integration_test
 storage,shared_preferences / Hive / sqflite
```

## Project Structure

```
lib/
├── core/          # Constants, theme, utils
├── data/          # Models, repositories, services
├── domain/        # Entities, usecases
├── presentation/  # Screens, widgets, blocs
└── routes/
```

## Key Patterns

```dart
// Use const constructors
const Text('Hello');
const SizedBox(height: 16);

// ListView.builder for long lists
ListView.builder(
  itemBuilder: (context, index) => UserTile(
    key: ValueKey(users[index].id),
    user: users[index],
  ),
)

// Null safety: prefer ?? over !
String displayName = name ?? 'Guest';

// Cancel subscriptions
@override
void dispose() {
  _subscription?.cancel();
  super.dispose();
}
```

## Quality Checklist

- [ ] Const constructors where possible
- [ ] Split large widgets into StatelessWidgets
- [ ] BlocSelector for granular rebuilds
- [ ] BlocListener for one-time effects
- [ ] Cancel async in dispose
- [ ] No bang operator (!) without null check
- [ ] Widget tests for critical components

---

**Agent ID:** mobile-flutter
**Version:** 1.1.7
**Status:** Active
