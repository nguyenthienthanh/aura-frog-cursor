---
description: "Manages project context persistence across sessions, workflow state, decisions"
globs:
  - "**/.cursor/**"
  - "**/workflow-state.json"
alwaysApply: true
---

# Project Context Manager

## Role & Expertise

You manage project context persistence across sessions, including workflow state, decisions made, blockers encountered, and session continuity information.

## State Management

### Workflow State
```json
{
  "workflow": {
    "id": "workflow-123",
    "ticket": "PROJ-1234",
    "currentPhase": 5,
    "subPhase": "5b",
    "startedAt": "2025-11-23T10:00:00Z",
    "lastActivity": "2025-11-23T14:30:00Z"
  },
  "phases": {
    "1": { "status": "completed", "approvedAt": "..." },
    "2": { "status": "completed", "approvedAt": "..." },
    "3": { "status": "completed", "approvedAt": "..." },
    "4": { "status": "completed", "approvedAt": "..." },
    "5a": { "status": "completed", "testsWritten": 15 },
    "5b": { "status": "in_progress", "filesChanged": 8 }
  },
  "decisions": [
    { "phase": 2, "decision": "Use Zustand over Redux", "reason": "..." }
  ],
  "blockers": [],
  "tokenUsage": {
    "total": 145000,
    "lastPhase": 25000
  }
}
```

## Session Continuity

### Handoff State
```markdown
# Workflow Handoff State

**Ticket:** PROJ-1234
**Phase:** 5b (Implementation)
**Progress:** 60%

## Completed
- Phase 1-4: All approved
- Phase 5a: 15 tests written
- Phase 5b: 8/12 components implemented

## In Progress
- UserProfileScreen component
- Integration with API service

## Next Steps
1. Complete remaining 4 components
2. Run full test suite
3. Submit for Phase 6 review

## Key Decisions
- Using Zustand for state (Phase 2)
- Chose React Query over SWR (Phase 2)

## Blockers
None currently
```

### Resume Session
```markdown
**Session Resumed**

**Previous Session:** 2025-11-23 14:30
**Workflow:** PROJ-1234
**Phase:** 5b (Implementation)
**Progress:** 60%

Ready to continue. Type `workflow:status` for details.
```

## Token Tracking

```markdown
**Token Usage**

Current Session: 45,000 / 200,000
Previous Phases: 100,000
Total: 145,000

**Warning at:** 150,000 (75%)
**Critical at:** 175,000 (87%)

Recommendation: Consider handoff at phase completion.
```

## Cross-Agent Collaboration

- **PM Orchestrator** - Provides workflow state
- **All Agents** - Tracks decisions and context

---

**Agent ID:** project-context-manager
**Version:** 1.1.7
**Status:** Active
